<?php $__env->startSection('title', $member->first_name . ' ' . $member->last_name); ?>
<?php $__env->startSection('description', 'User Profile'); ?>

<?php $__env->startSection('css'); ?>
    <link href="/assets/admin/vendor/bootstrap-fileinput/jasny-bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" type="text/css" href="/assets/admin/vendor/bootstrap-datepicker/bootstrap-datepicker.min.css">
    <style>
        .daterangepicker{
            z-index:99999!important;
        }
    </style>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>

    <div class="container-fluid container-fullw bg-white">
        <div class="row">
            <?php echo $__env->make('admin.members.includes.nav', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
            <div class="col-md-9 col-sm-9 nopadding">
                <?php echo Form::model($member, ['Method' => 'Post', 'route' => ['members_update_profile', $member->id]]); ?>


                <fieldset>
                    <legend>Personal Information</legend>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('first_name', 'First Name'); ?>

                                <?php echo Form::input('text', 'first_name', null, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('last_name', 'Last Name'); ?>

                                <?php echo Form::input('text', 'last_name', null, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('gender', 'Gender'); ?>

                                <?php echo Form::select('gender', [
                                    'm' => 'Male',
                                    'f' => 'Female'
                                ], $member->profile->gender, ['class' => 'form-control', 'style' => 'width:100%']); ?>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('id_number', 'ID Number'); ?>

                                <?php echo Form::input('text', 'id_number', null, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Additional Billing Information</legend>
                    <div class="form-group <?php if($errors->has('billing_email_address')): ?> has-error <?php endif; ?>">
                        <div class="pull-left"> <?php echo Form::label('billing_email_address', 'Billing Email Address'); ?></div>
                        <div class="pull-right"><small><strong><i class="fa fa-info-circle"></i> <i>This email address will be cc'd when sending account invoices.</i></strong></small></div>
                        <?php echo Form::input('text', 'billing_email_address', null, ['class' => 'form-control']); ?>

                        <?php if($errors->has('billing_email_address')): ?> <p class="help-block"><?php echo e($errors->first('billing_email_address')); ?></p> <?php endif; ?>
                    </div>

                    <div class="form-group">
                        <?php echo Form::label('payment_arrangement', 'Payment Arrangement'); ?>

                        <?php echo Form::select('payment_arrangement', [
                            '' => 'Please Select',
                            true => 'Yes',
                            false => 'No',
                        ],null, ['class' => 'form-control']); ?>

                    </div>

                </fieldset>

                <fieldset>
                    <legend>Contact Information</legend>
                    <div class="row">
                        <div class="col-md-6">
                            <?php if(auth()->user()->hasRole('super')): ?>
                                <div class="form-group">
                                    <?php echo Form::label('email', 'Email'); ?>

                                    <span class="pull-right"><small><i><strong>Change this by sending an email to IT</strong></i></small></span>
                                    <?php echo Form::input('text', 'email', null, ['class' => 'form-control']); ?>

                                </div>
                            <?php else: ?>
                                <div class="form-group">
                                    <?php echo Form::label('email', 'Email'); ?>

                                    <span class="pull-right"><small><i><strong>Change this by sending an email to IT</strong></i></small></span>
                                    <?php echo Form::input('text', 'email', null, ['class' => 'form-control', 'disabled' => 'disabled']); ?>

                                </div>
                            <?php endif; ?>

                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('cell', 'Cellphone'); ?>

                                <?php echo Form::input('text', 'cell', null, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Additional Information</legend>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('company', 'Company Name'); ?>

                                <?php echo Form::input('text', 'company', $member->profile->company, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('website', 'Website'); ?>

                                <?php echo Form::input('text', 'website', $member->profile->website, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('position', 'Current Position'); ?>

                                <?php echo Form::input('text', 'position', $member->profile->position, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('tax', 'Tax number'); ?>

                                <?php echo Form::input('text', 'tax', $member->profile->tax, ['class' => 'form-control']); ?>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('body', 'Professional Body'); ?>

                                <?php echo Form::select('body', [
                                null => 'No Professional Body',
                                'SAIBA' => 'The Southern African Institute for Business Accountants',
                                'SAIT' => 'The South African Institute of Tax Practitioners',
                                ] ,$member->profile->body, ['class' => 'form-control', 'style' => 'width:100%']); ?>

                            </div>
                        </div>
                        <?php if (Auth::check() && Auth::user()->is('super')): ?>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('roles', 'Member role'); ?>

                                <?php echo Form::select('roles[]', $roles, $member->roles()->lists('id')->toArray(), ['class' => 'custom-select form-control', 'style' => 'width:100%', 'multiple' => 'multiple']); ?>

                            </div>
                        </div>
                        <?php endif; ?>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('cpd_with_sait', 'Subscription with Sait'); ?>

                                <?php echo Form::select('cpd_with_sait', [
                                null => 'Please Select',
                                '1' => 'Active CPD Subscription with SAIT',
                                '0' => 'Not Active CPD Subscription with SAIT',
                                ] ,$member->cpd_with_sait, ['class' => 'form-control', 'style' => 'width:100%']); ?>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <?php echo Form::label('debt_arrangement', 'Account debt arrangement'); ?>

                                <?php echo Form::select('debt_arrangement', [
                                null => 'Please Select',
                                '1' => 'Yes',
                                '0' => 'No',
                                ] ,null, ['class' => 'form-control', 'style' => 'width:100%']); ?>

                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Professional Body</legend>
                    <div class="row">
                        <div class="col-md-6">
                            <?php if(auth()->user()->hasRole('super')): ?>

                                <div class="form-group <?php if($errors->has('body_id')): ?> has-error <?php endif; ?>">
                                    <strong><small class="pull-right"><i>Change this by sending an email to IT</i></small></strong>
                                    <?php echo Form::label('body_id', 'Professional Body'); ?>

                                    <select name="body_id" id="body_id" class="form-control">
                                        <option value="null">Please Select</option>
                                        <?php foreach($bodies as $body): ?>
                                            <?php if($member->body): ?>
                                                <option value="<?php echo e($body->id); ?>" <?php echo e(($body->id == $member->body->id ? "selected" : "")); ?>><?php echo e($body->title); ?></option>
                                            <?php else: ?>
                                                <option value="<?php echo e($body->id); ?>"><?php echo e($body->title); ?></option>
                                            <?php endif; ?>
                                        <?php endforeach; ?>
                                    </select>
                                    <?php if($errors->has('body_id')): ?> <p class="help-block"><?php echo e($errors->first('body_id')); ?></p> <?php endif; ?>
                                </div>
                            <?php else: ?>
                                <div class="form-group <?php if($errors->has('body_id')): ?> has-error <?php endif; ?>">
                                    <strong><small class="pull-right"><i>Change this by sending an email to IT</i></small></strong>
                                    <?php echo Form::label('body_id', 'Professional Body'); ?>

                                    <select name="body_id" id="body_id" class="form-control" disabled="true">
                                        <option value="null">Please Select</option>
                                        <?php foreach($bodies as $body): ?>
                                            <?php if($member->body): ?>
                                                <option value="<?php echo e($body->id); ?>" <?php echo e(($body->id == $member->body->id ? "selected" : "")); ?>><?php echo e($body->title); ?></option>
                                            <?php else: ?>
                                                <option value="<?php echo e($body->id); ?>"><?php echo e($body->title); ?></option>
                                            <?php endif; ?>
                                        <?php endforeach; ?>
                                    </select>
                                    <?php if($errors->has('body_id')): ?> <p class="help-block"><?php echo e($errors->first('body_id')); ?></p> <?php endif; ?>
                                </div>

                            <?php endif; ?>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group <?php if($errors->has('membership_verified')): ?> has-error <?php endif; ?>">
                                <strong><a href="<?php echo e(route('resend_membership_confirm', $member->id)); ?>"><small class="pull-right"><i class="fa fa-envelope"></i> <i>Resend verification email</i></small></a></strong>
                                <?php echo Form::label('membership_verified', 'Membership Status'); ?>

                                <?php echo Form::select('membership_verified', [
                                    true => 'Membership Verified',
                                    false => 'Membership not Verified',
                                ],null, ['class' => 'form-control disabled', 'disabled' => true]); ?>

                                <?php if($errors->has('membership_verified')): ?>
                                    <p class="help-block"><?php echo e($errors->first('membership_verified')); ?></p> <?php endif; ?>
                            </div>
                        </div>

                    </div>
                </fieldset>

                <?php /* <fieldset>
                    <legend>Demographics</legend>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group <?php if($errors->has('industry')): ?> has-error <?php endif; ?>"> 
                                <?php echo Form::label('industry', 'Please indicate the Industry / Sector that you work in:'); ?>

                                <?php echo Form::select('industry', $industry,  null, ['class' => 'form-control', 'placeholder' => 'Select your industry/sector']); ?>

                                <?php echo Form::input('text', 'other_industry', null, ['class' => 'form-control other_industry', 'placeholder' => 'Other', 'style' => "display: none;"]); ?>

                                <?php if($errors->has('industry')): ?> <p class="help-block"><?php echo e($errors->first('industry')); ?></p> <?php endif; ?>
                            </div>
                        </div>

                    </div>
                </fieldset> */ ?>

                <?php echo $__env->make('admin.members.includes.settings', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

                <div class="form-group">
                    <button class="btn btn-primary" type="submit">
                        Update Profile
                        <i class="fa fa-arrow-circle-right"></i>
                    </button>
                    <?php if (Auth::check() && Auth::user()->is('super')): ?>
                    <a href="<?php echo e(route('remove_roles_from_user', $member->id)); ?>" class="btn btn-danger pull-right"><i class="fa fa-ban"></i> Remove all roles from user</a>
                    <?php endif; ?>
                </div>


                <?php echo Form::close(); ?>

            </div>
        </div>
    </div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>
    <script src="/js/app.js"></script>
    <script src="/assets/admin/assets/js/profile.js"></script>
    <script src="/assets/admin/vendor/bootstrap-fileinput/jasny-bootstrap.js"></script>
    <script src="/assets/admin/vendor/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <script>
        jQuery(document).ready(function () {
            Profile.init();
        });
    </script>
    <script src="/assets/admin/assets/js/bootstrap-confirm-delete.js"></script>

    <script type="text/javascript">
        $('.custom-select').select2();
    </script>

    <script>
        // $(document).ready(function() {
        //     // $('#employment').select2();
        //     if($('#industry').val() == 'Other') {
        //         $('.other_industry').show();
        //     } else {
        //         $('.other_industry').hide();
        //     }
        //     $('#industry').change(function() {
        //         if($(this).val() == 'Other') {
        //             $('.other_industry').show();
        //         } else {
        //             $('.other_industry').hide();
        //         }
        //     })
        // });
    </script>
    <?php echo $__env->make('admin.members.includes.spin', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('admin.layouts.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>