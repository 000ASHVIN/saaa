<?php $__env->startSection('title'); ?>
    My Webinars on Demand
<?php $__env->stopSection(); ?>

<?php $__env->startSection('breadcrumbs'); ?>
    <?php echo Breadcrumbs::render('dashboard.my_webinars'); ?>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('styles'); ?>
    <style type="text/css">
        .bootstrap-dialog-message form, .bootstrap-dialog-message .form-group {
            margin-bottom: 0;
        }
        .event-container-inner {
            max-width: 100%;
        }

        /* .my-webinars-btn-container {
            position: relative;
            top: 15px;
        } */

        .new-events-view {
            min-height: 0px;
        }

        .btn-container {
            line-height:100px;
            /* text-align: center;
            display: inline-block;
            position: absolute;
            bottom: 50%; */
        }

        .browse-webinar-button-container {
            text-align: right;
            display: inline-block;
        }
        @media  only screen and (max-width:768px){ 
            section div.row>div{margin-bottom:0px;}

            .browse-webinar-button-container .btn {
                margin-top:10px;
            }

            .btn-container {
                line-height:55px;
            }

        }

         /* Filter Tab CSS*/
        .events-tab {
            list-style-type: none;
            padding: 0px;
            margin-bottom: 0px;
        }

        ul li.tablist {
            display: inline-block;
            margin-right: 4px;
        }

        ul li.tablist a {
            padding-left:20px;
            padding-right:20px;
        }

        ul li.tablist.active a {
            background-color: #8cc03c;
            color: #ffffff;
            border: #8cc03c solid 1px;
        }
        /*End Filter tabs CSS*/
    </style>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
    <section>
        <div class="container">
            <?php echo $__env->make('dashboard.includes.sidebar', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
            <div class="col-lg-9 col-md-9 col-sm-8">
                <div class="row">
                    <div class="col-md-12">
                        <?php echo Form::open(['method' => 'get', 'route' => 'dashboard.webinars_on_demand.index']); ?> 
                            <?php echo $__env->make('webinars_on_demand.includes.search_webinar', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                        <?php echo Form::close(); ?>

                    </div>
                </div>
                <hr>
                <div class="col-lg-12 col-md-12 col-sm-12" id="myWebinars">
                    <ul class="nav nav-tabs nav-top-border">
                        <?php if($is_practice_package): ?>
                            <?php foreach($practice_package_tabs as $tab): ?>
                                <li class="<?php echo e($activeTab=='tab_'.$tab->id?'active':''); ?>"><a data-id="<?php echo e('tab_'.$tab->id); ?>" href="#<?php echo e('tab_'.$tab->id); ?>" data-toggle="tab"><?php echo e($tab->name); ?></a></li>
                            <?php endforeach; ?>
                        <?php else: ?>

                            <li class="<?php echo e($activeTab=='my_webinars'?'active':''); ?>"><a data-id="my_webinars" href="#my_webinar" data-toggle="tab">Purchased</a></li>
                            <li class = "<?php echo e($activeTab=='free_wods'?'active':''); ?>"><a data-id="free_wods" href="#free_wods" data-toggle="tab">Free</a></li>
                            <li class = "<?php echo e($activeTab=='browse_webinars'?'active':''); ?>"><a data-id="browse_webinars" href="#browse_webinar" data-toggle="tab">Browse WODs</a></li>

                        <?php endif; ?>

                        <li class = "<?php echo e($activeTab=='webinar_series'?'active':''); ?>"><a data-id="webinar_series" href="#webinar_series" data-toggle="tab">Series</a></li>

                    </ul>

                    <div class="tab-content">
                        <?php if($is_practice_package): ?>

                            <?php foreach($practice_package_tabs as $tab): ?>
                            <div class="tab-pane fade in <?php echo e($activeTab=='tab_'.$tab->id?'active':''); ?>" id="<?php echo e('tab_'.$tab->id); ?>">
                                <?php
                                    $browse_videos = $tab->tab_videos;
                                ?>
                                <?php echo $__env->make('dashboard.includes.browse_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                            </div>
                            <?php endforeach; ?>

                        <?php else: ?>

                            <div class="tab-pane fade in <?php echo e($activeTab=='my_webinars'?'active':''); ?>" id="my_webinar">
                                <?php echo $__env->make('dashboard.includes.my_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                            </div>

                            <div class="tab-pane fade in <?php echo e($activeTab=='browse_webinars'?'active':''); ?>" id="browse_webinar">

                                <ul class="events-tab">
                                    <li class="tablist <?php echo e($browseactiveTab=='paid_browse_videos'?'active':''); ?>"><a data-id="paid_browse_videos" href="#paid_browse_videos" data-toggle="tab" class="btn btn-default">Paid</a></li>
                                    <li class = "tablist <?php echo e($browseactiveTab=='free_browse_videos'?'active':''); ?>"><a data-id="free_browse_videos" href="#free_browse_videos" data-toggle="tab" class="btn btn-default">Free</a></li>
                                </ul>
                            
                                <div class="tab-content">
                                    
                                    <?php
                                        $browse_videos = $paid_browse_videos;
                                    ?>
                                    <div class="tab-pane fade in <?php echo e($browseactiveTab=='paid_browse_videos'?'active':''); ?>" id="paid_browse_videos">
                                        
                                        <?php echo $__env->make('dashboard.includes.browse_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                                    </div>
                                    
                                    <?php
                                        $browse_videos = $free_browse_videos;
                                    ?>
                                    <div class="tab-pane fade in <?php echo e($browseactiveTab=='free_browse_videos'?'active':''); ?>" id="free_browse_videos">
                                        <?php echo $__env->make('dashboard.includes.browse_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                                    </div>
                                </div>
                            </div>

                            <?php
                                $browse_videos = $free_wods;
                            ?>
                            <div class="tab-pane fade in <?php echo e($activeTab=='free_wods'?'active':''); ?>" id="free_wods">
                                <?php echo $__env->make('dashboard.includes.browse_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                            </div>

                        <?php endif; ?>
                        
                        <?php
                            $browse_videos = $webinar_series;
                        ?>
                        <div class="tab-pane fade in <?php echo e($activeTab=='webinar_series'?'active':''); ?>" id="webinar_series">
                            <?php echo $__env->make('dashboard.includes.browse_webinars_tickets', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                        </div>

                    </div>
                </div>
        </div>
    </div>
</section>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>
    <script src="/js/app.js"></script>
    <script>
    jQuery(document).ready(function () {
        var activeTabName = $(".nav.nav-tabs.nav-top-border li.active a").attr("data-id");
        $('#webinars_on_demand').val(activeTabName);
        $(document).on('click','ul li',function(){
            var activeTabName = $(".nav.nav-tabs.nav-top-border li.active a").attr("data-id");
            $('#webinars_on_demand').val(activeTabName);
        });

        var activeTabName = $(".events-tab li.active a").attr("data-id");
        $('#browse_free_paid').val(activeTabName);
        $(document).on('click','ul li.tablist',function(){
            var activeTabName = $(".events-tab li.active a").attr("data-id");
            $('#browse_free_paid').val(activeTabName);
        });
    });
    </script>
    <script>
        jQuery(document).ready(function () {
          $('#sub_cat').hide();
          $('#sub_sub_cat').hide();
            $(document).on('change','#category',function(){
                $('#sub_sub_cat').hide();
                $("#sub_sub_category").empty();
                // $('#sub_cat').hide();
                var category = $(this).val();
                var category_text = $('#category option:selected').html();
                if (category) {
                   
                    $.ajax({
                        type: "POST",
                        cache: false,
                        url: '<?php echo e(route('webinars_on_demand.video.category')); ?>',
                        data: {'category':category, 'is_dashboard': 1, '_token':'<?php echo e(csrf_token()); ?>'},
                        async: false,
                        error: function (xhr, settings, exception) {
                            alert('The update server could not be contacted.');
                        },
                        success: function (res) {
                            if (res) {
                               $('#sub_cat').show();

                                $("#sub_category").empty();
                                $("#sub_category").append('<option value="">Select</option>');
                             
                                $.each(res, function (key, value) {
                                    $("#sub_category").append('<option value="' + value.id + '">' + value.title + '</option>');
                                });

                                if(category_text == "Please Select.."){
                                    $('#sub_cat').hide();
                                    $('#sub_sub_cat').hide();
                                    $("#sub_category").empty();
                                    $("#sub_category").append('<option value="">Select</option>');
                                }
                                
                                $("#sub_category").val('');

                            } else {
                                $("#sub_category").empty();
                                $('#sub_category').append(`<option value=""> 
                                    Select
                                </option>`);
                                $('#sub_cat').hide();
                                $('#sub_sub_cat').hide();

                            }
                        }
                    });
                } else {
                    $("#sub_category").empty();
                }
            });
            
            <?php if($category): ?>
                $('#category').trigger('change');
            <?php endif; ?>

            <?php if($sub_category): ?>
                $("#sub_category").val('<?php echo e($sub_category); ?>');
            <?php endif; ?>

            <?php if($category == "null"): ?> 
            $('#sub_cat').hide();
                $("#sub_category").empty();
                $("#sub_category").append('<option value="">Select</option>');
            <?php endif; ?>

            // $('#sub_category').trigger('change');

        });
    </script>

<script>
        jQuery(document).ready(function () {
          $('#sub_sub_cat').hide();
            $(document).on('change','#sub_category',function(){
                var sub_category = $(this).val();
                if(sub_category == '') {
                    $('#sub_sub_cat').hide();
                }
                if (sub_category) {
                    $.ajax({
                        type: "POST",
                        cache: false,
                        async: false,
                        url: '<?php echo e(route('webinars_on_demand.video.category')); ?>',
                        data: {'category':sub_category, 'is_dashboard': 1, '_token':'<?php echo e(csrf_token()); ?>'},
                        error: function (xhr, settings, exception) {
                            alert('The update server could not be contacted.');
                        },
                        success: function (res) {
                            if (res) {
                               $('#sub_sub_cat').show();

                                $("#sub_sub_category").empty();
                                $("#sub_sub_category").append('<option value="">Select</option>');
                                
                                $.each(res, function (key, value) {
                                    $("#sub_sub_category").append('<option value="' + value.id + '">' + value.title + '</option>');
                                });

                            } else {
                                $("#sub_sub_category").empty();
                                $('#sub_sub_cat').hide();
                            }
                        }
                    });
                } else {
                    $("#sub_sub_category").empty();
                }
            });

            <?php if($sub_category): ?>
                $('#sub_category').trigger('change');
            <?php endif; ?>

            <?php if($sub_sub_category): ?>
                $("#sub_sub_category").val('<?php echo e($sub_sub_category); ?>');
            <?php endif; ?>

        });
    </script>
    <script>
        jQuery(document).ready(function () {
            $('.wod_video_play').click(function(){
                var video_id = $(this).closest('.row').find('#video_id').val();
                $.ajax({
                            type: "POST",
                            // cache: false,
                            // async: false,
                            url: '<?php echo e(route('webinars_on_demand.play')); ?>',
                            data:  {'_token':'<?php echo e(csrf_token()); ?>', 'video_id':video_id },
                            error: function (xhr, settings, exception) {
                                alert('The update server could not be contacted.');
                            },
                            success: function (res) {
                            //    console.log(res);
                            }
                        });
            });
        });
        </script>
<?php $__env->stopSection(); ?>


<?php echo $__env->make('app', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>